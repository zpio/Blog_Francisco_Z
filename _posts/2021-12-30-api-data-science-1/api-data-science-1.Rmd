---
title: "APIs y Ciencia de Datos. Parte 1"
description: |
  Introducci√≥n a las APIs con Postman
author:
  - name: Francisco Zambrano
    url: https://www.linkedin.com/in/pfzambra/
date: 2021-12-31
categories:
  - R
  - API
  - Postman
preview: images/preview_api1.png
output: 
  distill::distill_article:
    highlight: haddock
    highlight_downlit: false
    self_contained: false
    #toc: true
---

![](images/preview_api1.png)

**API**
==========================================

Una **Interfaz de programaci√≥n de aplicaciones**(**API**), es un conjunto de **subrutinas**, **funciones** y **procedimientos** (o m√©todos, en la programaci√≥n orientada a objetos) que ofrece un software para que otro software pueda interactuar con el.

![](images/api edteam.jpg)

**API REST**
==========================================

Las **API REST** son un tipo de API espec√≠ficas con el objetivo de garantizar una comunicaci√≥n fluida entre el **cliente** y el **servidor**. Puede pensar en el cliente (**aplicaciones WEB** o **m√≥viles**) como el **front-end** y el servidor como el **back-end**. En otras palabras, las API act√∫an como intermediario entre el cliente y el servidor.

**REST** (Transferencia de Estado Representacional) es un estilo de arquitectura de software para guiar el dise√±o de arquitectura para la web.

Las **API REST** se basan en el **protocolo HTTP (Hypertext Transfer Protocol)** para exponer su arquitectura. Cuando escribe **`http://example.com`** en un navegador, el **"http"** le dice al navegador que use las reglas de HTTP cuando se comunique con el servidor.

**PROTOCOLO HTTP**
==========================================

Un protocolo es un conjunto de reglas a seguir. El **protocolo HTTP** es el protocolo de la web que permite intercambiar informaci√≥n (CLIENTE ‚Äì SERVIDOR) mediante un serie de **reglas est√°ndares**.

El **servidor** espera peticiones, si la petici√≥n del cliente contiene el protocolo correcto, entonces, el servidor devuelve la informaci√≥n solicitada.

El **Protocolo Http** es un protocolo usado por la arquitectura API REST.


**METODOS o VERBOS HTTP**
==========================================

Para hacer peticiones o acciones a un servidor se utilizan **m√©todos** o **verbos HTTP** est√°ndares.

A continuaci√≥n se listan los tipos de peticiones mas frecuentes:

- **GET**

Esta m√©todo sirve para obtener informaci√≥n de parte del servidor. Por ejemplo: obtener listados de personas, pel√≠culas, im√°genes, etc.

- **POST**

Este m√©todo sirve para enviar informaci√≥n, desde el cliente al servidor, para crear nuevos recursos. Por ejemplos: usuarios, comentarios, likes, etc.

- **PUT**

Este m√©todo sirve para actualizar un recurso ya existente, cambi√°ndoles las propiedades.

- **DELETE**

Este m√©todo sirve para borrar un recurso.

- **PATCH**

Este m√©todo sirve para actualizar parcialmente un recurso. PUT en teor√≠a actualiza todo el recurso, pero PATCH solo una parte del recurso.

- **OPTIONS**

Este m√©todo lo utilizan los navegadores de forma nativa. Mediante el m√©todo OPTIONS los navegadores validan si un dominio puede recibir o hacer peticiones desde otro dominio. Sirve para evitar que hagan ataques tipo CORS (Cross-Origin Resource Sharing).


**HEADERS HTTP**
==========================================

Las cabeceras es un espacio destinado para enviar metadata en la petici√≥n HTTP, por ejemplo, enviar tokens de autenticaci√≥n.


**BODY HTTP**
==========================================

El cuerpo de la petici√≥n contiene los datos que el cliente desea enviar al servidor.

Estas cuatro partes (URL, method, headers, y body) constituyen una solicitud HTTP completa.


**RESPUESTA HTTP**
==========================================

Cuando se hace una petici√≥n o solicitud HTTP al servidor, este intenta cumplir con la solicitud y enviar una respuesta al cliente. El servidor env√≠a un **c√≥digo de respuesta**, **header** y **body**.

Los **c√≥digos de respuesta** son n√∫meros de tres d√≠gitos para determinar el estado de solicitud procesada.

Estos son los c√≥digos de respuestas m√°s frecuentes y est√°n agrupados en **intervalos de 100**.

![](images/cod-resp1.png)

üëâ Los c√≥digos entre **200 y 299** son los c√≥digos que todos queremos ver como respuesta del servidor, porque indica que la petici√≥n fue enviada correctamente y el proceso tanto del cliente como el servidor sali√≥ todo bien.

üëâ Los c√≥digos del **300 al 399** que da el servidor indica que un recurso fue movido temporal o permanentemente por alguna raz√≥n.

üëâ Los c√≥digos del **400 al 499** que da el servidor indica que cliente hizo una petici√≥n que no existe o mal hecha. Por ejemplo hacer una petici√≥n a un sitio web que no existe.

üëâ Los c√≥digos del **500 a 599**son errores que ocurren del lado del servidor, por ejemplo, cuando un servidor esta ca√≠do. 

![](images/cod-resp2.jpg)

**FORMATO JSON**
==========================================


**JSON** son las siglas de JavaScript Object Notation. JSON se ha convertido en la forma principal en que los datos se transportan a trav√©s de las API. La mayor√≠a de las API enviar√°n sus respuestas en formato JSON.
JSON tiene el formato de una serie de pares clave-valor entre llaves:

```bash
{
    "name": "Francisco",
    "last_name": "Zambrano"
}
```
![](images/json.jpg)


**API KEY**
==========================================

La **API Key Authentication** es un c√≥digo que se utiliza para identificar y autenticar una aplicaci√≥n o un usuario. Tambi√©n act√∫an como un identificador √∫nico y proporcionan un token secreto con fines de autenticaci√≥n.

Las claves de API se utilizan com√∫nmente para controlar la utilizaci√≥n de la interfaz de la API y realizar un seguimiento de c√≥mo se utiliza. Esto suele ser una medida de precauci√≥n para evitar abusos o usos malintencionados. 

Cuando el cliente se autentica con la clave API, el servidor sabe que debe permitir el acceso del cliente a los datos, limitando las funciones administrativas.

En muchas ocaciones se coloca la clave en el encabezado de la Autorizaci√≥n. Otro forma, es agregar la clave a la URL por ejemplo:

**`http://example.com?api_key=my_secret_key`**


**ENDPOINTS**
==========================================

Todo lo que hay en la web son **recursos**. Por ejemplo, cuando accedemos a una pagina web le solicitamos al servidor que nos envie el `index.html`(es un recurso), index.html internamente solicita el `styles.css` (otro recurso), las im√°genes de la pagina web tambien son recursos. 

Una caracter√≠stica importante en las API es que cada recurso debe tener una **URL √∫nica** y que cada recurso est√© representado por un formato especifico (xml, json, jpg, etc) pero puede cambiar de formato tambien.

Cuando los desarrolladores dise√±an una **API REST** asigan cada recurso a una **URL**.

En una API REST t√≠pica, un recurso tendr√° dos patrones de URL asignados:

El primer patr√≥n es el plural del nombre del recurso, como **`/orders`**. 

El segundo patr√≥n es el plural del nombre del recurso m√°s un identificador √∫nico para especificar un recurso √∫nico, como **`/orders/<order_id>`**, donde `<order_id>` es el identificador √∫nico de un pedido. 

Estos dos patrones de URL constituyen los primeros puntos finales (**ENDPOINTS**) que admitir√° nuestra API. 

Estos se denominan puntos finales simplemente porque van al final de la URL, como en:

**`http://example.com/<endpoint_goes_here>`**

Ahora que le asignamos URL al recurso hay que indicar que acciones puede realizar el cliente mediante los verbos HTTP (GET, POST, PUT o DELETE) en la solicitud. Por ejemplo:

- GET/orders -> Lista de pedidos
- POST/orders	-> Realizar un nuevo pedido
- GET/orders/1 -> Obtener detalles para el pedido 1
- PUT/orders/1 ->	Actualizar pedido 1
- DELETE/orders/1 -> Cancelar pedido 1


**QUE ES POSTMAN?**
==========================================

![](images/postman-logo.png)

Es una plataforma para testear APIs y crear APIs se puede usar de forma local en el computador o en la web.

**<https://www.postman.com/>**

**Postman echo** es una API de Postman que sirve para aprender hacer solicitudes. Nos valemos de una URL la cual vamos a hacer peticiones al servidor. 

**<https://postman-echo.com>**


**HACIENDO PETICIONES CON POSTMAN**

Como primer paso hay que crearse una cuenta en **Postman**, es muy facil y gratis.

Luego, debe crear un espacio de trabajo en Postman en **Create Workspace**:

![](images/post1.PNG)


En el signo mas (+) puede abrir pesta√±as para crear las peticiones:

![](images/post2.PNG)


Puede explorar los tipos de peticiones que mencionamos anteriormente:

![](images/post3.PNG)


Para hacer una petici√≥n tipo **GET** se debe escribir la URL de **Postman echo** seguido de **/GET**

```bash
https://postman-echo.com/get
```

![](images/post5.PNG)

Lo que devuelve la petici√≥n GET son varias cosas: el **codigo de respuesta**: 200 OK, un campo vac√≠o de argumentos, dado que tambi√©n se puede enviar argumentos en GET. Tambi√©n hay informaci√≥n de cabeceras como el token y tambi√©n la informaci√≥n de la url.

Las peticiones tipo **GET** tambi√©n pueden llevar argumentos, o enviar datos. Por ejemplo:

![](images/post6.PNG)

Para realizar peticiones tipo **POST** hay que indicar los par√°metros, pero no desde la URL aunque si se puede pero no es lo recomendable, sino en el cuerpo de la petici√≥n. En Postman podemos simular un env√≠o de informaci√≥n desde un **formulario web**, escogiendo la opcion **Body** y **x-www-urlencoded**

```bash
https://postman-echo.com/post
```

![](images/post7.PNG)

Podemos simular el env√≠o de informaci√≥n en texto plano en **POST**:

![](images/post8.PNG)


Podemos simular el envio de informaci√≥n en formato Json, en **POST**:

![](images/post9.PNG)


En Postman podemos simular hacer peticiones tipo **PUT**, como la actualizaci√≥n de un recurso, enviando en formato Json:

```bash
https://postman-echo.com/put
```

![](images/post10.PNG)


En Postman podemos simular hacer peticiones tipo **DELETE** para eliminar un recurso, enviando en formato Json:

```bash
https://postman-echo.com/delete
```

![](images/post11.PNG)


Recomiendo los siguientes recursos para seguir profundizando en APIs y POSTMAN:

Un curso gratuito de API REST en la plataforma Edteam:

**<https://ed.team/cursos/api-rest>**

Un curso de pago de POSTMAN: **<https://ed.team/cursos/postman>**

Si accedes con el siguiente link o con el codigo: 342602, obtienes descuentos en tu suscripci√≥n:

**<https://ed.team/premium?cupon=REF-342602>**











